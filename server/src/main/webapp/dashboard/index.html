<html class="html-reset">
    <head class="html-reset">
        <title>VMS Server Dashboard</title>
        <!-- JQuery JS and CSS -->
        <script src="jquery/js/jquery-1.9.1.js"></script>
        <script src="jquery/js/jquery.dataTables.js"></script>
        <script src="jquery/js/jquery-ui-1.10.3.vms.js"></script>
        <script src="jquery/js/jquery.flot.js"></script>
        <script src="jquery/js/jquery.jsonview.js"></script>
        <script src="jquery/js/ash.js"></script>

        <!-- Codemirror -->
        <!-- link rel="stylesheet" href="codemirror/lib/codemirror.css">
        <link rel="stylesheet" href="codemirror/addon/dialog/dialog.css" -->
        <script src="codemirror/lib/codemirror.js"></script>
        <script src="codemirror/mode/groovy/groovy.js"></script>
        <script src="codemirror/addon/dialog/dialog.js"></script>
        <script src="codemirror/addon/search/searchcursor.js"></script>
        <script src="codemirror/addon/search/search.js"></script>
        <style type="text/css">.CodeMirror {border-top: 1px solid black; border-bottom: 1px solid black;}</style>

        <link rel="stylesheet" type="text/css" href="css/jquery.jsonview.css"/>
        <link rel="stylesheet" type="text/css" href="css/jquery.dataTables_themeroller.css"/>
        <link rel="stylesheet" type="text/css" href="jquery/css/vms/jquery-ui.css"/>
        <link rel="stylesheet" type="text/css" href="css/vms-override.css"/>
        <link rel="stylesheet" type="text/css" href="css/qe.css"/>

        <!-- this is where the widgets are created -->
        <script type="text/javascript"  src="okeanosdashboard.js"></script>
        <script type="text/javascript"  src="vmsserverinfotab.js"></script>
        <script type="text/javascript"  src="servercyclesummary.js"></script>
        <script type="text/javascript"  src="status.js"></script>
        <script type="text/javascript"  src="inputvalidation.js"></script>
        <script type="text/javascript"  src="serverpublishtab.js"></script>
        <script type="text/javascript"  src="cyclereplaytab.js"></script>
        <script type="text/javascript"  src="serverinputdatatab.js"></script>
        <script type="text/javascript"  src="widgets.js"></script>
        <script type="text/javascript"  src="searchutils.js"></script>
        <script type="text/javascript"  src="responsemodels.js"></script>
        <script type="text/javascript"  src="vmsparams.js"></script>
        <script type="text/javascript"  src="formatter.js"></script>
        <!-- script type="text/javascript"  src="serverStats.js"></script -->
        <script>
            $(function() {
                $("#data-dashboard-tab").tabs();
                $("#cycle-stats-tabs").tabs();
                $("#client-dashboard-tab").tabs();
                $("#stats-client-historic").tabs();
                $("#debug-dashboard-tab").tabs();
                $("#okeanos-tabs").tabs();
            });

            $(document).ready(function() {new Dashboard().initialize(); $(document).tooltip();});
        </script>

        <!-- Netflix specific -->
        <script async src="https://blesk.prod.netflix.net/static/js/blesk.js"></script>
    </head>

    <!--
        HTML body section
    -->
    <body class="html-reset" style="font-size:12px; background-color: #FFF;">
        <div id="id-spinnaker-banner"  class='spinnaker-banner'>
            <div class='spinnaker-banner-text' id='id-env-txt'>TEST</div>
            <!-- div class='spinnaker-banner-text' id='id-vip-txt'>local-vip</div -->
        </div>
        <div id="okeanos-tabs">
            <ul>
                <li><a href="#cycle-view">Server</a></li>
                <li><a href="#client-dashboard-tab">Client</a></li>
                <li><a href="#data-dashboard-tab">Data</a></li>
                <li><a href="#debug-dashboard-tab">Diagnostics</a></li>
                <li><a href="#cb-dashboard-tab">Circuit Breaker</a></li>
            </ul>
            <div id="blesk" data-appid="vmstransformer"></div>
            <div id="cycle-view" style="padding: 0 25 0 25">
                <div class="view-header">
                    <div class="view-font-h1" style="width:60%; float:left">Server Cycles </div>
                    <div style="width:37%; float:right">
                        <div style="float:right">
                            <div class="view-font-h2" style="display:inline-block;">VMS VIP</div>
                            <select id="id-vms-vip-select" style="display:inline-block;">
                                <option></option>
                            </select> 
                        </div>
                    </div>
                    <div class="hr-line"></div>
                </div>
                <!-- class="ui-widget-content ui-helper-clearfix" -->
                <div id="id-cycles-container" style="width:30%; float:left;margin-right:0px;">
                    <div>
                        <table>
                            <tr class="view-font-h3" >
                                <td>Date (UTC)</td>
                                <td style="padding-left:50px">
                                    <select id="id-vms-index-select"><option></option></select>
                                </td>
                            </tr>
                            <tr class="hidden">
                                <td>Cycle ID</td>
                                <td style="padding-left:50px">
                                    <select id="id-vms-cycle-select"><option></option></select> 
                                </td>
                            </t>
                        </table>
                    </div>
                    <div id="id-cycle-timestamp-div" class="ui-group" style="overflow-y: auto; clear:both;"> </div>
                </div>
                <div id="id-summary-toggle-btn" class="ui-vtag"></div>
                <div id="cycle-stats-tabs" style="width:67%;float:right;">
                <!-- ui-widget-tooolbar -->
                <div id="stats-tab-toolbar" class="view-font-h3" style="margin-bottom:10px; display:inline-block;">
                    <div style="display:inline-block; float:left">
                        <div id="id-cycle-id-txt" style="display:inline-block;"></div>
                        <div id="id-cycle-date-txt" style="display:inline-block; margin-left: 15px;"></div>
                    </div>
                    <div style="display:inline-block; float:right">
                        <div style="position:absolute; right:0px; display:inline-block;">
                            <button id="id-cycle-prev-btn" style="display:inline-block;">Prev</button>
                            <button id="id-cycle-next-btn" style="display:inline-block;">Next</button>
                        </div>
                    </div>
                </div>

                <div>
                    <ul>
                        <li><a href="#cycle-status-tab">SUMMARY</a></li>
                        <li><a href="#cycle-properties-tab">PROPERTIES</a></li>
                        <li><a href="#cycle-publish-tab">PUBLISH</a></li>
                        <li><a href="#cycle-error-logs-tab">LOGS</a></li>
                        <li><a href="#cycle-circuitbreaker-tab">CIRCUIT BREAKER</a></li>
                        <li><a href="#cycle-input-validation-tab">APOLLO</a></li>
                        <li><a href="#cycle-inputdata-tab">INPUTS</a></li>
                        <li><a href="#cycle-replay-tab">REPLAY CYCLE</a></li>
                        <li><a href="#cycle-input-search-tab">SEARCH</a></li>
                        <li><a href="#expander-tab">OTHER+</a></li>
                    </ul>
                    <!-- NOTE: the divs below should be in the same order as listed in <ul> section -->
                    <div id="cycle-status-tab">
                        <div style="padding-top: 8px"></div>
                        
                        <div id="id-vms-server-rightpane" class="ui-group ui-helper-clearfix" style="width:40%; float:left">
                                <div class='vms-info'>TRANSFORM PROGRESS
                                    <div id="id-cycle-refresh-btn" class="ui-refresh-button" title="Refresh for latest cycle"></div>
                                </div>
                                <div class='ui-inner' id="id-cycle-transform-progress">
                                    <div id="id-cycle-transform-progress-label" class="progress-label-rel"></div>
                                </div>

                                <div id='cycle-warn-aggregate' info='WARNINGS/ERRORS'></div>
                                <div id='cycle-system-info' info='SYSTEM INFORMATION'></div>
                                <div id='cycle-oldest-coldstart' info='OLDEST COLDSTARTS'></div>
                                <div id='fastlane-ids' info='FASTLANE IDS'></div>
                                <div id='pinned-titles-ids' info='PINNED TITLES'></div>
                        </div>
                        <div id ="id-atlas-durations" class="ui-group ui-helper-clearfix" style="width:56%; float:right">
                                <div class='vms-info'>COMPONENT DURATION</div>
                                <div class='ui-inner' id="id-vms-server-dashboard"></div>
                        </div>
                    </div>
                    <div id="cycle-properties-tab">
                        <div style="padding-top: 8px"></div>
                        <div id="id-properties-table"></div>
                    </div>
                    <div id="cycle-publish-tab">
                        <div style="padding-top: 8px"></div>
                        <em>Publish blobs to s3</em>
                        <div id="id-s3-publish-table"></div>
                        <br>
                        <em>Publish failures</em>
                        <div id="id-publish-failure-table"></div>
                        <br>
                    </div>
                    <div id="cycle-error-logs-tab">
                        <div id="id-error-toolbar" style="font-size: 12px; display:inline-block; padding: 4px; width:100%">
                            Search for Tag (AND optionally id):
                            <input  type="textbox" id="id-search-error-box" size="25" value=""></input>
                            Log-level:
                            <select id="id-loglevel-select" style="display:inline-block;">
                                <option value="eventInfo.logLevel:error">Error</option>
                                <option value="eventInfo.logLevel:error AND exception">Errors with Exceptions</option>
                                <option value="(eventInfo.logLevel:warn OR eventInfo.logLevel:error)">Warn and above</option>
                                <option value="(eventInfo.logLevel:warn OR eventInfo.logLevel:error OR eventInfo.logLevel:info)">Info and above</option>
                                <option value="">No filter</option>
                            </select>
                            <button id="id-search-error-btn" class='ui-widget-content'>search</button>
                        </div>
                        <br>
                        <div id="id-cycle-error-container" style="margin-top: 5px; width=100%">
                            <div id="id-cycle-error-list" style="width:25%; float:left;">
                                <table id="id-cycle-error-table" class="clickabletable"></table>
                            </div>
                            <div id="id-cycle-error-locations" style="float:right;">
                            </div>
                        </div>
                    </div>
                    <div id="cycle-circuitbreaker-tab">
                        <div id="id-cycle-circuitbreaker-locations"></div>
                    </div>
                    <div id="cycle-input-validation-tab">
                        <div style="padding-top: 8px"></div>
                        <table style="width:100%;">
                            <tr>
                                <td colspan="2">
                                    <table>
                                        <tr>
                                            <td>
                                                <div class='ui-widget-content'>Map Prefix:<input type="text" id="cycle-input-validation-map-filter"></div>
                                            </td>
                                            <td>
                                                <div class='ui-widget-content'>
                                                  Filter:
                                                  <select class="target" id="cycle-input-validation-error-filter">
                                                    <option value="all" selected="selected">All</option>
                                                    <option value="Error">Error</option>
                                                    <option value="Warning">Warning</option>
                                                  </select>
                                                </div>
                                            </td>  
                                            <td>
                                                <button class='ui-widget-content' id="cycle-input-validation-search" style="font-size:11;">Search</button>
                                            </td> 
                                            <td>
                                                <button class='ui-widget-content' id="cycle-input-validation-show-specification" style="font-size:11;">Show/Hide Specification</button>
                                            </td> 
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td style="max-width:400px;" style="vertical-align: top;"><div id="cycle-input-validation-widget" style="max-width:400px; height: 800px;  overflow: scroll;"></div></td>
                                <td style="width:50%;vertical-align: top;"><div id="cycle-input-validation-results" style="max-width:800px; height: 800px;  overflow: scroll;"></div></td>
                                <td style="width:50%;">
                                    <div id="cycle-input-validation-specification-source-div" style="font-size: 11px;">
                                    </div>
                                </td>
                            </tr>
                        </table>
                        </div>
                        <div id="cycle-input-validation-search-dialog" class="hidden">
                            <div>Key:<input type="text" id="cycle-input-validation-search-dialog-key">
                        </div>
                    </div>
                    <div id="cycle-inputdata-tab">
                        <div style="padding-top: 8px"></div>
                        <div id="cycle-input-data-view">
                            <h3>Inputs to the transformer:</h3>
                            <div style="display:inline-block;" id="id-cycle-input-data-versions"></div>
                            <br><br><br>
                            <h3>Inputs to the converter:</h3>
                            <div id="id-cycle-input-shardinfo-locations"></div>
                        </div>
                    </div>
                    <div id="cycle-replay-tab">
                        <table>
                        <tr><td>
                            <div id="id-live-toolbar" class="ui-widget-header ui-corner-all" style="display:inline-block; padding: 4px">
                                <div id="id-slowerlive-btn" class='ui-widget-content'></div>
                                <div id="id-slowlive-btn" class='ui-widget-content'></div>
                                <div id="id-startlive-btn" class='ui-widget-content'>play</div>
                                <div id="id-fastlive-btn" class='ui-widget-content'></div>
                                <div id="id-fasterlive-btn" class='ui-widget-content'></div>
                            </div>
                            <div id="id-live-dialog" title="Stop replay?" class="hidden">
                                <p>
                                    <span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>
                                    Replay running for long time, do you wish to continue?
                                </p>
                            </div>
                        </td></tr>
                        <tr><td>
                            <div id="id-transformations-progress" class="progress-bar"> <div id="id-transformations-progress-label" class="progress-label">Click play button..</div></div>
                        </td></tr>
                        <tr><td>
                        <div id="id-global-tail-outer" class="shadow outerframesuperlong">
                            <div class="splunkfont">Rolling log (latest on top)</div>
                            <div id="id-global-tail-div" class="innerframesuperlong"></div>
                        </div>
                        <div id="id-transformations-outer" class="shadow outerframelong">
                            <div class="splunkfont">Post Transformation Progress</div>
                            <div id="id-transformations-live" class="innerframelong"></div>
                        </div>
                        <div id="id-warn-error-outer" class="shadow outerframelong">
                            <div class="splunkfont">Count of warn-errors</div>
                            <div id="id-warn-error-live" class="innerframelong"></div>
                        </div>
                        </td></tr>
                        </table>
                    </div>
                    <div id="cycle-input-search-tab">
                        Query: <input type="textbox" id="id-input-search-query"></input>
                        Fields: <input type="textbox" id="id-search-fields"></input>
                        Limit results: <input type="textbox" id="id-search-size" value="1" size="3"></input>
                        <input type="checkbox" id="id-search-coldstart" checked>
                        <label for="id-search-coldstart">coldstarts</label>
                        <input type="checkbox" id="id-search-events" checked>
                        <label for="id-search-events">events</label>
                        <span id="input-search-radio-view">
                            <input type="radio" id="input-search-text-view" name="radio"/><label for="input-search-text-view">Text</label>
                            <input type="radio" id="input-search-tree-view" name="radio" checked="checked" /><label for="input-search-tree-view">Tree</label>
                        </span>
                        <br>
                        <input type="textbox" id="id-get-search-url" size="130"></input>
                        <button id="id-run-search-btn">Search</button>
                        <table>
                            <tr>
                                <td style="vertical-align:top"><div id="id-indexname-locations"></div></td>
                                <td style="vertical-align:top"><div id="id-search-indexname-types" class='ui-widget-content'></div></td>
                                <td style="vertical-align:top"><div id="id-search-indexname-results" class='ui-widget-content'></div></td>
                            </tr>
                        </table>
                    </div>
                    <div id="expander-tab"></div>
            </div>
            </div>
            </div>


            <div id="client-dashboard-tab" style="padding: 0 25 0 25">
                <ul>
                    <li><a href="#vms-sps">SPS and VMS Announcements</a></li>
                    <li><a href="#stats-client-historic">Refresh Duration</a></li>
                    <li><a href="#stats-client-jarversions">Client Jar Versions</a></li>
                    <li><a href="#stats-client-blobinfo">Blob info</a></li>
                    <li><a href="#stats-client-usage">Client Usage</a></li>
                </ul>
                <div id="vms-sps">
                    <div id = "id-vms-sps-content" class='ui-widget-content'></div>
                </div>
                <div id="stats-client-historic">
                    <div id = "id-vms-client-dashboard" class='ui-widget-content'></div>
                </div>
                <div id="stats-client-jarversions">
                    <div id = "id-vms-client-jarversions-atlas" class='ui-widget-content'></div>
                </div>
                <div id="stats-client-blobinfo">
                    <div id = "id-vms-blob-info" class='ui-widget-content'></div>
                </div>
                <div id="stats-client-usage">
                    <div id = "id-vms-usage-info" class='ui-widget-content'></div>
                </div>
            </div>
            <div id="data-dashboard-tab" style="padding: 0 25 0 25">
                <ul>
                    <li><a href="#stats-events">Mutation Events</a></li>
	                </ul>
                <div id="stats-events">
                    <div id = "id-mutation-events-dashboard" class='ui-widget-content'></div>
                </div>
            </div>
            <div id="debug-dashboard-tab" style="padding: 0 25 0 25">
                 <ul>
                    <li><a href="#stats-vmsiopsys">VMS IOPS</a></li>
                    <li><a href="#stats-client-vmsdebug">TEJA</a></li>
                    <li><a href="#stats-vmsinputhistory">INPUT HISTORY</a></li>
                    <li><a href="#stats-vmsoutputhistory">OUTPUT HISTORY</a></li>
                    <li><a href="#io-dashboard-tab">PRIMARY VIP DIFF</a></li>
                </ul>
                <div id="stats-vmsiopsys">
                    <div id = "id-vmsiopsys-dashboard" class='ui-widget-content'></div>
                </div>
                <div id="stats-client-vmsdebug">
                    <div id = "id-vmsdebug-tab" class='ui-widget-content'></div>
                </div>
                <div id="stats-vmsinputhistory">
                    <div id = "id-vmsinputhistory-dashboard" class='ui-widget-content'></div>
                </div>
                <div id="stats-vmsoutputhistory">
                    <div id = "id-vmsoutputhistory-dashboard" class='ui-widget-content'></div>
                </div>
                <div id="io-dashboard-tab" style="padding: 0 25 0 25">
                    <div id="io-inset" class="ui-widget-content"> </div>
                </div>
            </div>
            <div id="cb-dashboard-tab" style="padding: 0 25 0 25">
                <div id="cb-inset" class="ui-widget-content">  
                </div>
            </div>
        </div>
        <!-- TODO: change back es_vmsops.us-east-1.dyntest.netflix.net ec2-54-81-202-224.compute-1.amazonaws.com-->
        <input  type="textbox" id="id-elasticsearchhost-box" class = "hidden" size="35" value="es_vmsops2.us-east-1.dyntest.netflix.net"></input>
    </body>
</html>
